{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block main_content %}
	<h1>
		Spending By Category 		
		<a href="{% url 'spendbycat-list' prev.year prev.month %}">{{prev|date:"F"}}</a>			
			{{view_date|date:"F"}}
		{% if next %}
			<a href="{% url 'spendbycat-list' next.year next.month %}">{{next|date:"F"}}</a>	
		{% endif %}
	</h1>

		<table class="table">
			<thead>
			<tr>
				<th scope="col">Group</th>
				<th scope="col">Category</th>
				<th scope="col">Amount</th>
				<th scope="col">Budget</th>
			</tr>
			</thead>
			<tbody>			
				{% for spendbycat in spendbycat_list %}
				<tr>
				<td>{{spendbycat.0.group.name}}</td> <!-- Category Group Object-->
				<td>{{spendbycat.0.name}}</td> <!-- Category Object-->
				<td>{{spendbycat.1.amount__sum|floatformat:"2"|default:"0.00"}}</td>
				{% if spendbycat.2.0 %} <!-- List Category Budget Object -->
					<td>{{spendbycat.2.0.amount}}</td>
				{% else %}
					<td><a href="{% url 'add-budget' spendbycat.0.pk %}">Add</a></td>
				{% endif %}
				<tr>
				{% endfor %}
			</tbody>
		</table>
{% endblock %}
